notesfile







mainStore üçç loads on server, updates on page as user clicks
flexStore üçç loads on server or page, depending on the GETed route, for demonstration in development
pageStore üçç starts empty on server and client at the start, updates on page

figure out the right way to load a hybrid store
you can see client, client from: navigate page1, click to page2, press Hit button
you can see server, client from: navigate page2, press Hit button
but the navigate to page2 is bad because there's a pause as the margin await holds rendering on the client
so experiment with:
if (process server) await flexStore.load(); else flexStore.load()
but also, this is largely academic, as mainStore and pageStore will probably do everything you need

you have imagined, but not yet implemented the flow where main store, on server render, populates an array
causing a v-if to open and a v-for to grow
causing more components, SomeItem, to be included in the render (all still, remember, on the server!)
causing another fake fetch to another endpoint (separate from the first fetchWorker('/api/load' ...)
causing more data to fill into main store, or another store, and this process to continue further, potentially

and, the whole flow around a hybrid store may be academic, in that:
(1) you've got mainStore working with universal rendering, it always starts out on the server, and
(2) pageStore is fine in that it starts out empty on the server and page, and then calls from the page grow it, it just doesn't have a load method







